var J=Object.create(null);function k(t){if(t in J)return J[t];let e=document.createElement("template");return e.innerHTML=t,J[t]=e,e}function E(t){return t.content.cloneNode(!0)}function c(t,e){let l=t,o,n,i,a;for(o=0,n=e.length;o<n;o++)for(i=e[o],l=l.firstChild,a=0;a<i;a++)l=l.nextSibling;return l}function F(t,e,l){if(t.replaceWith(e),l){let o=t.childNodes,n=o.length;for(;n--;)e.appendChild(o[0])}}function H(t,e){t.append(e)}function C(t,e){t.after(e)}function V(t,e){let l=t;if(e.nextSibling!==t)for(;l;){let o=l;if(l=l.nextSibling,o.remove(),o===e)break}}function v(t,e,l,o){t.addEventListener(e,l,o)}function W(t,e,l){t.setAttribute(e,l)}function S(t,e,l){t.classList.toggle(e,l)}var R=Object,Ge=Symbol,N=Set,Ie=/\B([A-Z])/g;function ae(t){return t.replace(Ie,"-$1").toLowerCase()}var se=R.is,Be=R.assign,Z=t=>typeof t=="function";var m=null,$=null,A=new N,_=new N,q=0,re=[],y=null,K=class{parent=null;scopes=[];cleanups=[];constructor(e){let l=this;!e&&m&&(m.scopes.push(l),l.parent=m)}run(e){let l=m;try{return m=this,e()}finally{m=l}}clear(){let e=this,l=e.cleanups,o=e.scopes;for(let n of l)n();for(let n of o)n.parent=null,n.clear();l.length=0,o.length=0}},O=class{a;d=new N;b=new N;c=0;f=!1;e=!1;g=!1;constructor(e){this.a=e}peek(){return this.a}set(e){return this.value=e}subscribe(e){return p(()=>e(this.value))}get value(){let e=this;return e.e||pe(e),$&&(this.d.add($),$.b.add(e),A.delete(e)),this.a}set value(e){let l=this;if(l.a!==e){l.a=e;let o=_.size===0;if(_.add(l),l.c===0&&ce(l),o&&q===0&&(Q(_),_.clear(),y)){let n=y;throw y=null,n}}}h(){}i(){let e=this,l=$,o=A;return $=e,A=e.b,e.b=new N,(n,i)=>{if(n)for(let a of e.d)ue(a);for(let a of A)(i?de:Je)(e,a);A.clear(),A=o,$=l}}};function ce(t){if(t.c++===0)for(let e of t.d)ce(e)}function ue(t){if(!t.f&&t.c>0&&--t.c===0)for(let e of t.d)ue(e)}function Q(t){for(let e of t)if(e.c>0&&(e.f=!0,--e.c===0)){if(e.g)throw new Error("Cycle detected");e.f=!1,e.g=!0,e.h(),e.g=!1,Q(e.d)}}function Je(t,e){t.e=!0,t.b.add(e),e.d.add(t)}function de(t,e){if(t.b.delete(e),e.d.delete(t),e.d.size===0){e.e=!1;for(let l of e.b)de(e,l)}}function qe(t){if(_.delete(t),t.c=0,t.h(),y){let e=y;throw y=null,e}for(let e of t.d)e.c>0&&(e.c>1&&e.c--,re.push(e))}function pe(t){t.e=!0,qe(t)}function T(t){return new K(t)}function x(t){return new O(t)}function L(t){let e=new O(void 0);return e.h=()=>{let l=e.i();try{let o=t();l(e.a===o,!0),e.a=o}catch(o){y||(y=o),l(!0,!1)}},e}function fe(t){q++;try{return t()}finally{let e;for(;e=re.pop();)_.add(e);--q===0&&(Q(_),_.clear())}}function p(t){let e=L(()=>fe(t)),l=()=>e.i()(!0,!0);return pe(e),m&&m.cleanups.push(l),l}function U(t){m&&Z(t)&&m.cleanups.push(t)}var Fe=!1,Ve=1;var P=null,he=Ge(),M=class extends HTMLElement{$m=!1;$c=T(!0);$p={};$h=[];constructor(){super();let e=this,l=e.$p,o=e.constructor.$d;for(let n in o){let i=o[n];l[i]=x(he)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let l=e.constructor.$c,o=e.constructor.$s,n=e.$c,i=e.$h,a=e.shadowRoot,d=!1;a||(a=e.attachShadow({mode:"open"}),d=!0);let u=P;try{if(P=e,n.run(()=>l(a,e)),document.adoptedStyleSheets)d&&(a.adoptedStyleSheets=o);else for(let f of o)H(a,f.cloneNode(!0));for(let f of i){let g=f();Z(g)&&n.cleanups.push(g)}i.length=0}finally{P=u}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,l,o){let n=this,i=n.constructor.$d;e in i&&(n[i[e]]=o===""?!0:o)}};function X(t,e,l,o){let n=[],i=R.create(null);class a extends M{static observedAttributes=n;static $c=e;static $a=i;static $d=l;static $s=o}for(let d in l){let u=l[d],f=ae(d);i[f]=d,n.push(f),R.defineProperty(a.prototype,d,{get(){return this.$p[u].a},set(g){this.$p[u].value=g}})}return Fe&&(t="velvet-"+Ve++),t&&customElements.define(t,a),a}function ee(t){if(!document.adoptedStyleSheets){let l=document.createElement("style");return l.textContent=t,l}let e=new CSSStyleSheet;return e.replaceSync(t),e}function Y(t,e){let l=document.createTextNode("");F(t,l),p(()=>l.data=e())}function D(t,e){let l=T(),o,n;p(()=>{let i=e();i!==o&&(n&&(l.clear(),be(t,n),n=null),o=i,i&&(n=l.run(()=>i(t))))})}function ge(t,e,l){let o=[];p(()=>{let n=l(),i=0,a=n.length,d=o.length;for(;i<a;i++)if(o[i]){let u=o[i][2];u.value=n[i]}else{let u=o[i-1],f=u?u[1]:t,g=x(n[i]),w=T(!0);o[i]=[w,w.run(()=>e(f,g,i)),g]}if(d>a){let u=o[i-1],f=u?u[1]:t,g=o[d-1][1];for(;i<d;i++)o[i][0].clear();be(f,g),o.length=a}}),U(()=>{for(let n of o)n[0].clear()})}function be(t,e){V(t.nextSibling,e)}var We=k("<header class=header> <h1>todos</h1> <input class=new-todo placeholder='What needs to be done?' autofocus /> </header> <!>"),Ze=k("<section class=main> <input id=toggle-all class=toggle-all type=checkbox /> <label for=toggle-all>Mark all as complete</label> <ul class=todo-list> <!> </ul> <footer class=footer> <span class=todo-count> <strong><!></strong> <!> left </span> <ul class=filters> <li><a href=#/>All</a></li> <li><a href=#/active>Active</a></li> <li><a href=#/completed>Completed</a></li> </ul> <!> </footer> </section>"),Qe=k("<li> <div class=view> <input class=toggle type=checkbox /> <label> <!> </label> <button class=destroy></button> </div> <!> </li>"),Ue=k("<input class=edit />"),Xe=k("<button class=clear-completed> Clear completed </button>"),et=ee('button{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;appearance:none}.hidden{display:none}:host{display:block;background:#fff;margin:130px 0 40px;position:relative;box-shadow:0 2px 4px #0003,0 25px 50px #0000001a}input::placeholder{font-style:italic;font-weight:400;color:#0006}h1{position:absolute;top:-140px;width:100%;font-size:80px;font-weight:200;text-align:center;color:#b83f45;text-rendering:optimizeLegibility}.new-todo,.edit{position:relative;margin:0;width:100%;font-size:24px;font-family:inherit;font-weight:inherit;line-height:1.4em;color:inherit;padding:6px;border:1px solid #999;box-shadow:inset 0 -1px 5px #0003;box-sizing:border-box}.new-todo{padding:16px 16px 16px 60px;height:65px;border:none;background:rgba(0,0,0,.003);box-shadow:inset 0 -2px 1px #00000008}.main{position:relative;z-index:2;border-top:1px solid #e6e6e6}.toggle-all{width:1px;height:1px;border:none;opacity:0;position:absolute;right:100%;bottom:100%}.toggle-all+label{display:flex;align-items:center;justify-content:center;width:45px;height:65px;font-size:0;position:absolute;top:-65px;left:-0}.toggle-all+label:before{content:"\\276f";display:inline-block;font-size:22px;color:#949494;padding:10px 27px;transform:rotate(90deg)}.toggle-all:checked+label:before{color:#484848}.todo-list{margin:0;padding:0;list-style:none}.todo-list li{position:relative;font-size:24px;border-bottom:1px solid #ededed}.todo-list li:last-child{border-bottom:none}.todo-list li.editing{border-bottom:none;padding:0}.todo-list li.editing .edit{display:block;width:calc(100% - 43px);padding:12px 16px;margin:0 0 0 43px}.todo-list li.editing .view{display:none}.todo-list li .toggle{text-align:center;width:40px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;appearance:none}.todo-list li .toggle{opacity:0}.todo-list li .toggle+label{background-image:url(./assets/checkbox.svg);background-repeat:no-repeat;background-position:center left}.todo-list li .toggle:checked+label{background-image:url(./assets/checkbox-checked.svg)}.todo-list li label{word-break:break-all;padding:15px 15px 15px 60px;display:block;line-height:1.2;transition:color .4s;font-weight:400;color:#484848}.todo-list li.completed label{color:#949494;text-decoration:line-through}.todo-list li .destroy{display:none;position:absolute;top:0;right:10px;bottom:0;width:40px;height:40px;margin:auto 0;font-size:30px;color:#949494;transition:color .2s ease-out}.todo-list li .destroy:hover,.todo-list li .destroy:focus{color:#c18585}.todo-list li .destroy:after{content:"\\d7";display:block;height:100%;line-height:1.1}.todo-list li:hover .destroy{display:block}.todo-list li .edit{display:none}.todo-list li.editing:last-child{margin-bottom:-1px}.footer{padding:10px 15px;height:20px;text-align:center;font-size:15px;border-top:1px solid #e6e6e6}.footer:before{content:"";position:absolute;right:0;bottom:0;left:0;height:50px;overflow:hidden;box-shadow:0 1px 1px #0003,0 8px 0 -3px #f6f6f6,0 9px 1px -3px #0003,0 16px 0 -6px #f6f6f6,0 17px 2px -6px #0003}.todo-count{float:left;text-align:left}.todo-count strong{font-weight:300}.filters{margin:0;padding:0;list-style:none;position:absolute;right:0;left:0}.filters li{display:inline}.filters li a{color:inherit;margin:3px;padding:3px 7px;text-decoration:none;border:1px solid transparent;border-radius:3px}.filters li a:hover{border-color:#db7676}.filters li a.selected{border-color:#ce4646}.clear-completed,html .clear-completed:active{float:right;position:relative;line-height:19px;text-decoration:none;cursor:pointer}.clear-completed:hover{text-decoration:underline}.info{margin:65px auto 0;color:#4d4d4d;font-size:11px;text-shadow:0 1px 0 rgba(255,255,255,.5);text-align:center}.info p{line-height:1}.info a{color:inherit;text-decoration:none;font-weight:400}.info a:hover{text-decoration:underline}@media screen and (-webkit-min-device-pixel-ratio: 0){.toggle-all,.todo-list li .toggle{background:none}.todo-list li .toggle{height:40px}}@media (max-width: 430px){.footer{height:50px}.filters{bottom:10px}}:focus,.toggle:focus+label,.toggle-all:focus+label{box-shadow:0 0 2px 2px #cf7d7d;outline:0}');function tt(t,e){let n="todos",i={all:s=>s,active:s=>s.filter(r=>!r.completed),completed:s=>s.filter(r=>r.completed)},a=x(JSON.parse(localStorage.getItem(n)||"[]")),d=x("all"),u=x(null),f=x(null),g=L(()=>i[d.value](a.value)),w=L(()=>i.active(a.value).length),me=s=>{a.value=a.value.map(r=>({...r,completed:s.target.checked}))},ve=()=>{a.value=a.value.filter(s=>!s.completed)},xe=s=>{s.which===13&&(a.value=a.value.concat({id:Date.now(),title:s.target.value,completed:!1}),s.target.value="")},_e=s=>{a.value=a.value.filter(r=>r.id!==s)},te=s=>{a.value=a.value.map(r=>r.id!==s.id?r:{...r,...s})},ye=(s,r)=>{te({id:s,completed:r.target.checked})},we=s=>{s.which===13?s.target.blur():s.which===27&&(u.value=null,f.value=null)},ke=s=>{te({id:u.value,title:s.target.value}),u.value=null,f.value=null},le=()=>{let s=window.location.hash.replace(/#\/?/,"");i[s]||(s="all"),d.value=s};window.addEventListener("hashchange",le),le(),p(()=>localStorage.setItem(n,JSON.stringify(a.value))),p(()=>{f.value&&setTimeout(()=>f.value.focus())});let G=E(We),Ee=c(G,[0,3]),Se=c(G,[2]),$e=s=>{let r=E(Ze),oe=c(r,[0,1]),Ae=c(r,[0,5,1]),Ce=c(r,[0,7,1,1,0]),ze=c(r,[0,7,1,3]),Ne=c(r,[0,7,3,1,0]),Oe=c(r,[0,7,3,3,0]),Te=c(r,[0,7,3,5,0]),Le=c(r,[0,7,5]),je=c(r,[0]),Pe=(I,h)=>{let b=E(Qe),ie=c(b,[0,1,1]),Ke=c(b,[0,1,3,1]),Me=c(b,[0,1,3]),He=c(b,[0,1,5]),Ye=c(b,[0,3]),j=c(b,[0]),De=B=>{let ne=E(Ue),z=c(ne,[0]);return f.value=z,p(()=>z.value=h.value.title),v(z,"keydown",we),v(z,"blur",ke),C(B,ne),z};return p(()=>ie.checked=h.value.completed),v(ie,"change",B=>ye(h.value.id,B)),Y(Ke,()=>h.value.title),v(Me,"dblclick",()=>u.value=h.value.id),v(He,"click",()=>_e(h.value.id)),D(Ye,()=>u.value===h.value.id?De:null),W(j,"class","todo"),p(()=>S(j,"completed",h.value.completed)),p(()=>S(j,"editing",u.value===h.value.id)),C(I,b),j},Re=I=>{let h=E(Xe),b=c(h,[0]);return v(b,"click",ve),C(I,h),b};return p(()=>oe.checked=w.value===0),v(oe,"change",me),ge(Ae,Pe,()=>g.value),Y(Ce,()=>w.value),Y(ze,()=>w.value===1?"item":"items"),p(()=>S(Ne,"selected",d.value==="all")),p(()=>S(Oe,"selected",d.value==="active")),p(()=>S(Te,"selected",d.value==="completed")),D(Le,()=>a.value.length>w.value?Re:null),C(s,r),je};v(Ee,"keydown",xe),D(Se,()=>a.value.length>0?$e:null),H(t,G)}var At=X("x-app",tt,{},[et]);export{At as default};
//# sourceMappingURL=app.js.map
