var O=Object,Pe=Symbol,C=Set,Ye=/\B([A-Z])/g;function je(t){return t.replace(Ye,"-$1").toLowerCase()}var et=O.is,tt=O.assign,V=t=>typeof t=="function";var x=null,k=null,E=new C,v=new C,G=0,ee=[],_=null,I=class{parent=null;scopes=[];cleanups=[];constructor(e){let l=this;!e&&x&&(x.scopes.push(l),l.parent=x)}run(e){let l=x;try{return x=this,e()}finally{x=l}}clear(){let e=this,l=e.cleanups,o=e.scopes;for(let n of l)n();for(let n of o)n.parent=null,n.clear();l.length=0,o.length=0}},L=class{a;d=new C;b=new C;c=0;f=!1;e=!1;g=!1;constructor(e){this.a=e}peek(){return this.a}set(e){return this.value=e}subscribe(e){return f(()=>e(this.value))}get value(){let e=this;return e.e||ie(e),k&&(this.d.add(k),k.b.add(e),E.delete(e)),this.a}set value(e){let l=this;if(l.a!==e){l.a=e;let o=v.size===0;if(v.add(l),l.c===0&&te(l),o&&G===0&&(J(v),v.clear(),_)){let n=_;throw _=null,n}}}h(){}i(){let e=this,l=k,o=E;return k=e,E=e.b,e.b=new C,(n,i)=>{if(n)for(let r of e.d)le(r);for(let r of E)(i?oe:Ke)(e,r);E.clear(),E=o,k=l}}};function te(t){if(t.c++===0)for(let e of t.d)te(e)}function le(t){if(!t.f&&t.c>0&&--t.c===0)for(let e of t.d)le(e)}function J(t){for(let e of t)if(e.c>0&&(e.f=!0,--e.c===0)){if(e.g)throw new Error("Cycle detected");e.f=!1,e.g=!0,e.h(),e.g=!1,J(e.d)}}function Ke(t,e){t.e=!0,t.b.add(e),e.d.add(t)}function oe(t,e){if(t.b.delete(e),e.d.delete(t),e.d.size===0){e.e=!1;for(let l of e.b)oe(e,l)}}function Me(t){if(v.delete(t),t.c=0,t.h(),_){let e=_;throw _=null,e}for(let e of t.d)e.c>0&&(e.c>1&&e.c--,ee.push(e))}function ie(t){t.e=!0,Me(t)}function W(t){return new I(t)}function w(t){return new L(t)}function R(t){let e=new L(void 0);return e.h=()=>{let l=e.i();try{let o=t();l(e.a===o,!0),e.a=o}catch(o){_||(_=o),l(!0,!1)}},e}function He(t){G++;try{return t()}finally{let e;for(;e=ee.pop();)v.add(e);--G===0&&(J(v),v.clear())}}function f(t){let e=R(()=>He(t)),l=()=>e.i()(!0,!0);return ie(e),x&&x.cleanups.push(l),l}function De(t){x&&V(t)&&x.cleanups.push(t)}var H=Object.create(null);function $(t){if(t in H)return H[t];let e=document.createElement("template");return e.innerHTML=t,H[t]=e,e}function S(t){return t.content.cloneNode(!0)}function c(t,e){let l=t,o,n,i,r;for(o=0,n=e.length;o<n;o++)for(i=e[o],l=l.firstChild,r=0;r<i;r++)l=l.nextSibling;return l}function Ge(t,e,l){if(t.replaceWith(e),l){let o=t.childNodes,n=o.length;for(;n--;)e.appendChild(o[0])}}function q(t,e){t.append(e)}function N(t,e){t.after(e)}function Ie(t,e){let l=t;if(e.nextSibling!==t)for(;l;){let o=l;if(l=l.nextSibling,o.remove(),o===e)break}}function m(t,e,l,o){t.addEventListener(e,l,o)}function ne(t,e,l){t.setAttribute(e,l)}function A(t,e,l){t.classList.toggle(e,l)}var Be=!1,Je=1;var D=null,We=Pe(),B=class extends HTMLElement{$m=!1;$c=W(!0);$p={};$h=[];constructor(){super();let e=this,l=e.$p,o=e.constructor.$d;for(let n in o){let i=o[n];l[i]=w(We)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let l=e.constructor.$c,o=e.constructor.$s,n=e.$c,i=e.$h,r=e.shadowRoot,u=!1;r||(r=e.attachShadow({mode:"open"}),u=!0);let d=D;try{if(D=e,n.run(()=>l(r,e)),document.adoptedStyleSheets)u&&(r.adoptedStyleSheets=o);else for(let p of o)q(r,p.cloneNode(!0));for(let p of i){let g=p();V(g)&&n.cleanups.push(g)}i.length=0}finally{D=d}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,l,o){let n=this,i=n.constructor.$d;e in i&&(n[i[e]]=o===""?!0:o)}};function re(t,e,l,o){let n=[],i=O.create(null);class r extends B{static observedAttributes=n;static $c=e;static $a=i;static $d=l;static $s=o}for(let u in l){let d=l[u],p=je(u);i[p]=u,n.push(p),O.defineProperty(r.prototype,u,{get(){return this.$p[d].a},set(g){this.$p[d].value=g}})}return Be&&(t="velvet-"+Je++),t&&customElements.define(t,r),r}function ae(t){if(!document.adoptedStyleSheets){let l=document.createElement("style");return l.textContent=t,l}let e=new CSSStyleSheet;return e.replaceSync(t),e}function P(t,e){let l=document.createTextNode("");Ge(t,l),f(()=>l.data=e())}function Y(t,e){let l=W(),o,n;f(()=>{let i=e();i!==o&&(n&&(l.clear(),ce(t,n),n=null),o=i,i&&(n=l.run(()=>i(t))))})}function se(t,e,l){let o=[];f(()=>{let n=l(),i=0,r=n.length,u=o.length;for(;i<r;i++)if(o[i]){let d=o[i][2];d.value=n[i]}else{let d=o[i-1],p=d?d[1]:t,g=w(n[i]),y=W(!0);o[i]=[y,y.run(()=>e(p,g,i)),g]}if(u>r){let d=o[i-1],p=d?d[1]:t,g=o[u-1][1];for(;i<u;i++)o[i][0].clear();ce(p,g),o.length=r}}),De(()=>{for(let n of o)n[0].clear()})}function ce(t,e){Ie(t.nextSibling,e)}var qe=$("<header class=header> <h1>todos</h1> <input class=new-todo placeholder='What needs to be done?' autofocus /> </header> <!>"),Ze=$("<section class=main> <input id=toggle-all class=toggle-all type=checkbox /> <label for=toggle-all>Mark all as complete</label> <ul class=todo-list> <!> </ul> <footer class=footer> <span class=todo-count> <strong><!></strong> <!> left </span> <ul class=filters> <li><a href=#/>All</a></li> <li><a href=#/active>Active</a></li> <li><a href=#/completed>Completed</a></li> </ul> <!> </footer> </section>"),Fe=$("<li> <div class=view> <input class=toggle type=checkbox /> <label> <!> </label> <button class=destroy></button> </div> <!> </li>"),Qe=$("<input class=edit />"),Ue=$("<button class=clear-completed> Clear completed </button>"),Xe=ae('button{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;appearance:none}.hidden{display:none}:host{display:block;background:#fff;margin:130px 0 40px;position:relative;box-shadow:0 2px 4px #0003,0 25px 50px #0000001a}input::placeholder{font-style:italic;font-weight:400;color:#0006}h1{position:absolute;top:-140px;width:100%;font-size:80px;font-weight:200;text-align:center;color:#b83f45;text-rendering:optimizeLegibility}.new-todo,.edit{position:relative;margin:0;width:100%;font-size:24px;font-family:inherit;font-weight:inherit;line-height:1.4em;color:inherit;padding:6px;border:1px solid #999;box-shadow:inset 0 -1px 5px #0003;box-sizing:border-box}.new-todo{padding:16px 16px 16px 60px;height:65px;border:none;background:rgba(0,0,0,.003);box-shadow:inset 0 -2px 1px #00000008}.main{position:relative;z-index:2;border-top:1px solid #e6e6e6}.toggle-all{width:1px;height:1px;border:none;opacity:0;position:absolute;right:100%;bottom:100%}.toggle-all+label{display:flex;align-items:center;justify-content:center;width:45px;height:65px;font-size:0;position:absolute;top:-65px;left:-0}.toggle-all+label:before{content:"\\276f";display:inline-block;font-size:22px;color:#949494;padding:10px 27px;transform:rotate(90deg)}.toggle-all:checked+label:before{color:#484848}.todo-list{margin:0;padding:0;list-style:none}.todo-list li{position:relative;font-size:24px;border-bottom:1px solid #ededed}.todo-list li:last-child{border-bottom:none}.todo-list li.editing{border-bottom:none;padding:0}.todo-list li.editing .edit{display:block;width:calc(100% - 43px);padding:12px 16px;margin:0 0 0 43px}.todo-list li.editing .view{display:none}.todo-list li .toggle{text-align:center;width:40px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;appearance:none}.todo-list li .toggle{opacity:0}.todo-list li .toggle+label{background-image:url(./assets/checkbox.svg);background-repeat:no-repeat;background-position:center left}.todo-list li .toggle:checked+label{background-image:url(./assets/checkbox-checked.svg)}.todo-list li label{word-break:break-all;padding:15px 15px 15px 60px;display:block;line-height:1.2;transition:color .4s;font-weight:400;color:#484848}.todo-list li.completed label{color:#949494;text-decoration:line-through}.todo-list li .destroy{display:none;position:absolute;top:0;right:10px;bottom:0;width:40px;height:40px;margin:auto 0;font-size:30px;color:#949494;transition:color .2s ease-out}.todo-list li .destroy:hover,.todo-list li .destroy:focus{color:#c18585}.todo-list li .destroy:after{content:"\\d7";display:block;height:100%;line-height:1.1}.todo-list li:hover .destroy{display:block}.todo-list li .edit{display:none}.todo-list li.editing:last-child{margin-bottom:-1px}.footer{padding:10px 15px;height:20px;text-align:center;font-size:15px;border-top:1px solid #e6e6e6}.footer:before{content:"";position:absolute;right:0;bottom:0;left:0;height:50px;overflow:hidden;box-shadow:0 1px 1px #0003,0 8px 0 -3px #f6f6f6,0 9px 1px -3px #0003,0 16px 0 -6px #f6f6f6,0 17px 2px -6px #0003}.todo-count{float:left;text-align:left}.todo-count strong{font-weight:300}.filters{margin:0;padding:0;list-style:none;position:absolute;right:0;left:0}.filters li{display:inline}.filters li a{color:inherit;margin:3px;padding:3px 7px;text-decoration:none;border:1px solid transparent;border-radius:3px}.filters li a:hover{border-color:#db7676}.filters li a.selected{border-color:#ce4646}.clear-completed,html .clear-completed:active{float:right;position:relative;line-height:19px;text-decoration:none;cursor:pointer}.clear-completed:hover{text-decoration:underline}.info{margin:65px auto 0;color:#4d4d4d;font-size:11px;text-shadow:0 1px 0 rgba(255,255,255,.5);text-align:center}.info p{line-height:1}.info a{color:inherit;text-decoration:none;font-weight:400}.info a:hover{text-decoration:underline}@media screen and (-webkit-min-device-pixel-ratio: 0){.toggle-all,.todo-list li .toggle{background:none}.todo-list li .toggle{height:40px}}@media (max-width: 430px){.footer{height:50px}.filters{bottom:10px}}:focus,.toggle:focus+label,.toggle-all:focus+label{box-shadow:0 0 2px 2px #cf7d7d;outline:0}');function Ve(t,e){let n="todos",i={all:a=>a,active:a=>a.filter(s=>!s.completed),completed:a=>a.filter(s=>s.completed)},r=w(JSON.parse(localStorage.getItem(n)||"[]")),u=w("all"),d=w(null),p=w(null),g=R(()=>i[u.value](r.value)),y=R(()=>i.active(r.value).length),de=a=>{r.value=r.value.map(s=>({...s,completed:a.target.checked}))},ue=()=>{r.value=r.value.filter(a=>!a.completed)},pe=a=>{a.which===13&&(r.value=r.value.concat({id:Date.now(),title:a.target.value,completed:!1}),a.target.value="")},fe=a=>{r.value=r.value.filter(s=>s.id!==a)},Z=a=>{r.value=r.value.map(s=>s.id!==a.id?s:{...s,...a})},he=(a,s)=>{Z({id:a,completed:s.target.checked})},ge=a=>{a.which===13?a.target.blur():a.which===27&&(d.value=null,p.value=null)},be=a=>{Z({id:d.value,title:a.target.value}),d.value=null,p.value=null},F=()=>{let a=window.location.hash.replace(/#\/?/,"");i[a]||(a="all"),u.value=a};window.addEventListener("hashchange",F),F(),f(()=>localStorage.setItem(n,JSON.stringify(r.value))),f(()=>{p.value&&setTimeout(()=>p.value.focus())});let j=S(qe),xe=c(j,[0,3]),me=c(j,[2]),ve=a=>{let s=S(Ze),Q=c(s,[0,1]),_e=c(s,[0,5,1]),ye=c(s,[0,7,1,1,0]),we=c(s,[0,7,1,3]),ke=c(s,[0,7,3,1,0]),Ee=c(s,[0,7,3,3,0]),$e=c(s,[0,7,3,5,0]),Se=c(s,[0,7,5]),Ae=c(s,[0]),ze=(K,h)=>{let b=S(Fe),U=c(b,[0,1,1]),Ne=c(b,[0,1,3,1]),Te=c(b,[0,1,3]),Oe=c(b,[0,1,5]),Le=c(b,[0,3]),T=c(b,[0]),Re=M=>{let X=S(Qe),z=c(X,[0]);return p.value=z,f(()=>z.value=h.value.title),m(z,"keydown",ge),m(z,"blur",be),N(M,X),z};return f(()=>U.checked=h.value.completed),m(U,"change",M=>he(h.value.id,M)),P(Ne,()=>h.value.title),m(Te,"dblclick",()=>d.value=h.value.id),m(Oe,"click",()=>fe(h.value.id)),Y(Le,()=>d.value===h.value.id?Re:null),ne(T,"class","todo"),f(()=>A(T,"completed",h.value.completed)),f(()=>A(T,"editing",d.value===h.value.id)),N(K,b),T},Ce=K=>{let h=S(Ue),b=c(h,[0]);return m(b,"click",ue),N(K,h),b};return f(()=>Q.checked=y.value===0),m(Q,"change",de),se(_e,ze,()=>g.value),P(ye,()=>y.value),P(we,()=>y.value===1?"item":"items"),f(()=>A(ke,"selected",u.value==="all")),f(()=>A(Ee,"selected",u.value==="active")),f(()=>A($e,"selected",u.value==="completed")),Y(Se,()=>r.value.length>y.value?Ce:null),N(a,s),Ae};m(xe,"keydown",pe),Y(me,()=>r.value.length>0?ve:null),q(t,j)}var at=re("x-app",Ve,{},[Xe]);export{at as default};
//# sourceMappingURL=app.js.map
