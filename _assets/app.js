function S(l){let e=document.createElement("template");return e.innerHTML=l,e}function $(l){return document.importNode(l.content,!0)}function o(l,e){let t=l,s=0,i=e.length,n,a;for(;s<i;s++)for(n=e[s],t=t.firstChild,a=0;a<n;a++)t=t.nextSibling;return t}function le(l,e,t){if(l.replaceWith(e),t){let s=l.childNodes,i=s.length;for(;i--;)e.appendChild(s[0])}}function F(l,e){l.append(e)}function T(l,e){l.after(e)}function se(l,e){let t=l;if(e.nextSibling!==l)for(;t;){let s=t;if(t=t.nextSibling,s.remove(),s===e)break}}function k(l,e,t,s){l.addEventListener(e,t,s)}function ae(l,e,t){l.setAttribute(e,t)}function A(l,e,t){l.classList.toggle(e,t)}var M=Object,ze=Symbol,Qe=/\B([A-Z])/g;function de(l){return l.replace(Qe,"-$1").toLowerCase()}var ve=M.is,Ve=M.assign,ne=l=>typeof l=="function";var f,y=1<<0,w=1<<1,C=1<<2,P=1<<3,q=1<<4,H=1<<5,v,_,N,B=0,te=0,D=0;function _e(){B++}function me(){if(B>1){B--;return}let l,e=!1;for(;N;){let t=N.sort((s,i)=>s.h-i.h);N=f,te++;for(let s=0,i=t.length;s<i;s++){let n=t[s];n.c&=~C;try{n.s()}catch(a){e||(l=a,e=!0)}}}if(te=0,B--,e)throw l}function ge(l){let e;if(_)if(e=l.k,!e||e.p!==_)e={d:0,c:0,m:f,g:l,e:_.b,i:f,p:_,j:f,n:f},_.b=e,l.k=e,_.c&q&&l.o(e);else if(e.c&w){e.c&=~w;let t=_.b,s=e.i,i=e.e;e!==t&&(s&&(s.e=i),i&&(i.i=s),t&&(t.i=e),e.i=f,e.e=t,_.b=e)}else e=f;try{return l.peek()}finally{e&&(e.d=l.d)}}function ee(l){if(l.c&=~y,l.c&P)throw l.a;return l.a}function be(l){for(let e=l.b;e;e=e.e){let t=e.g.k;t&&(e.m=t),e.g.k=e,e.c|=w}}function ye(l){let e=l.b,t;for(;e;){let s=e.e;e.c&w?(e.g.l(e),e.e=f):(t&&(t.i=e),e.i=f,e.e=t,t=e),e.g.k=e.m,e.m&&(e.m=f),e=s}l.b=t}function We(l){let e=this;ye(e),_=l,me(),e.c&=~y}var R=class{constructor(e){let t=this;t.d=0,t.a=e,t.k=f,t.f=f}o(e){let t=this;e.c&H||(e.c|=H,e.j=t.f,t.f&&(t.f.n=e),t.f=e)}l(e){let t=this,s=e.n,i=e.j;e.c&H&&(e.c&=~H,s&&(s.j=i,e.n=f),i&&(i.n=s,e.j=f),e===t.f&&(t.f=i))}subscribe(e){return p(()=>e(this.value))}set(e){return this.value=e}peek(){return this.a}get value(){return ge(this)}set value(e){let t=this;if(e!==t.a){if(t.a=e,te>100)return;t.d++,D++,_e();try{for(let s=t.f;s;s=s.j)s.p.q()}finally{me()}}}},Y=class extends R{constructor(e){super(f),this.r=e,this.b=f,this.c=w,this.t=D-1}o(e){let t=this;if(!t.f){t.c|=w|q;for(let s=t.b;s;s=s.e)s.g.o(s)}super.o(e)}l(e){let t=this;if(super.l(e),!t.f){t.c&=~q;for(let s=t.b;s;s=s.e)s.g.l(s)}}q(){let e=this;if(!(e.c&(C|y))){e.c|=w|C;for(let t=e.f;t;t=t.j)t.p.q()}}peek(){let e=this;if(e.c&=~C,e.c&y)return e.a;if(e.c|=y,!(e.c&w)&&e.f||e.t===D)return ee(e);if(e.c&=~w,e.t=D,e.d>0){let n=e.b;for(;n&&n.g.d===n.d;){try{n.g.peek()}catch{}if(n.g.d!==n.d)break;n=n.e}if(!n)return ee(e)}let t=e.a,s=e.c,i=_;try{_=e,be(e),e.a=e.r(),e.c&=~P,(s&P||e.a!==t||e.d===0)&&e.d++}catch(n){e.a=n,e.c|=P,e.d++}finally{ye(e),_=i}return ee(e)}get value(){let e=this;return e.c&y?e.a:ge(e)}set value(e){super.value=e}},G=class{constructor(e){this.r=e,this.b=f,this.h=0,this.c=q}s(){let e=this;if(e.c&y)return;let t=e.u();try{e.r()}finally{t()}}u(){let e=this,t=_;return e.c|=y,_e(),_=e,be(e),We.bind(e,t)}q(){let e=this;e.c&(C|y)||(e.c|=C,N||(N=[]),N.push(e))}v(){let e=this;for(let t=e.b;t;t=t.e)t.g.l(t);e.c|=y,e.b=f}},U=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=f,t.h=0,!e&&v&&(t.parent=v,t.h=v.h+1,v.scopes.push(t))}run(e){let t=v;try{return v=this,e()}finally{v=t}}clear(){let e=this,t=e.scopes,s=e.cleanups;for(let i of t)i.clear(),i.parent=f;for(let i of s)i();t.length=0,s.length=0}};function L(l){return new U(l)}function ie(l){ne(l)&&v&&v.cleanups.push(l)}function x(l){return new R(l)}function z(l){return new Y(l)}function p(l){let e=new G(l),t=e.v.bind(e);try{e.s()}catch(s){throw t(),s}return v&&(e.h=v.h,v.cleanups.push(t)),t}var Ze=!1,Xe=1;var K=null,ke=ze(),J=class extends HTMLElement{$m=!1;$c=L(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,s=e.constructor.$d;for(let i in s){let n=s[i];t[n]=x(ke)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,s=e.constructor.$s,i=e.$c,n=e.$h,a=e.shadowRoot,h=!1;a||(a=e.attachShadow({mode:"open"}),h=!0);let d=K;try{if(K=e,i.run(()=>t(a,e)),document.adoptedStyleSheets)h&&(a.adoptedStyleSheets=s);else for(let u of s)F(a,u.cloneNode(!0));for(let u of n){let g=u();ne(g)&&i.cleanups.push(g)}n.length=0}finally{K=d}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,s){let i=this,n=i.constructor.$d;e in n&&(i.$p[n[e]].value=s===""?!0:s)}};function re(l,e,t,s){let i=[],n=M.create(null);class a extends J{static observedAttributes=i;static $c=e;static $a=n;static $d=t;static $s=s}for(let h in t){let d=t[h],u=de(h);n[u]=h,i.push(u),M.defineProperty(a.prototype,h,{get(){return this.$p[d].a},set(g){this.$p[d].value=g}})}return Ze&&(l="velvet-"+Xe++),l&&customElements.define(l,a),a}function Q(l,e){let t=document.createTextNode("");le(l,t),p(()=>t.data=e())}function V(l,e){let t=L(),s,i;p(()=>{let n=e();n!==s&&(i&&(t.clear(),we(l,i),i=null),s=n,n&&(i=t.run(()=>n(l))))})}function Ee(l,e,t){let s=[],i=v.h+1;p(()=>{let n=t(),a=0,h=n.length,d=s.length;for(;a<h;a++)if(s[a]){let u=s[a][2];u.value=n[a]}else{let u=s[a-1],g=u?u[1]:l,E=x(n[a]),j=L(!0);j.h=i,s[a]=[j,j.run(()=>e(g,E,a)),E]}if(d>h){let u=s[a-1],g=u?u[1]:l,E=s[d-1][1];for(;a<d;a++)s[a][0].clear();we(g,E),s.length=h}}),ie(()=>{for(let n=0,a=s.length;n<a;n++)s[n][0].clear()})}function we(l,e){se(l.nextSibling,e)}var tt=S("<header class=header><h1>todos</h1><input class=new-todo placeholder='What needs to be done?' autofocus /></header>"),lt=S("<section class=main><input id=toggle-all class=toggle-all type=checkbox /><label for=toggle-all>Mark all as complete</label><ul class=todo-list><!></ul><footer class=footer><span class=todo-count> <strong><!></strong> <!> left </span><ul class=filters><li><a href=#/>All</a></li><li><a href=#/active>Active</a></li><li><a href=#/completed>Completed</a></li></ul></footer></section>"),st=S("<li><div class=view><input class=toggle type=checkbox /><label><!></label><button class=destroy></button></div> <!></li>"),at=S("<input class=edit />"),nt=S("<button class=clear-completed>Clear completed</button>");function it(l,e){let i="todos",n={all:r=>r,active:r=>r.filter(c=>!c.completed),completed:r=>r.filter(c=>c.completed)},a=x(JSON.parse(localStorage.getItem(i)||"[]")),h=x("all"),d=x(null),u=x(null),g=z(()=>n[h.value](a.value)),E=z(()=>n.active(a.value).length),j=r=>{a.value=a.value.map(c=>({...c,completed:r.target.checked}))},xe=()=>{a.value=a.value.filter(r=>!r.completed)},Se=r=>{r.which===13&&(a.value=a.value.concat({id:Date.now(),title:r.target.value,completed:!1}),r.target.value="")},$e=r=>{a.value=a.value.filter(c=>c.id!==r)},oe=r=>{a.value=a.value.map(c=>c.id!==r.id?c:{...c,...r})},Ae=(r,c)=>{oe({id:r,completed:c.target.checked})},Ce=r=>{r.which===13?r.target.blur():r.which===27&&(d.value=null,u.value=null)},Ne=r=>{oe({id:d.value,title:r.target.value}),d.value=null,u.value=null},ue=()=>{let r=window.location.hash.replace(/#\/?/,"");n[r]||(r="all"),h.value=r};window.addEventListener("hashchange",ue),ue(),p(()=>localStorage.setItem(i,JSON.stringify(a.value))),p(()=>{u.value&&setTimeout(()=>u.value.focus())});let W=$(tt),Re=o(W,[0,1]),Te=o(W,[0]),je=r=>{let c=$(lt),fe=o(c,[0,0]),Oe=o(c,[0,2,0]),Le=o(c,[0,3,0,1,0]),Ie=o(c,[0,3,0,3]),He=o(c,[0,3,1,0,0]),Pe=o(c,[0,3,1,1,0]),Be=o(c,[0,3,1,2,0]),De=o(c,[0,3,1]),Ke=o(c,[0]),Me=(Z,m)=>{let b=$(st),he=o(b,[0,0,0]),Ye=o(b,[0,0,1,0]),Ge=o(b,[0,0,1]),Ue=o(b,[0,0,2]),Je=o(b,[0,2]),I=o(b,[0]),Fe=X=>{let pe=$(at),O=o(pe,[0]);return u.value=O,p(()=>O.value=m.value.title),k(O,"keydown",Ce),k(O,"blur",Ne),T(X,pe),O};return p(()=>he.checked=m.value.completed),k(he,"change",X=>Ae(m.value.id,X)),Q(Ye,()=>m.value.title),k(Ge,"dblclick",()=>d.value=m.value.id),k(Ue,"click",()=>$e(m.value.id)),V(Je,()=>d.value===m.value.id?Fe:null),ae(I,"class","todo"),p(()=>A(I,"completed",m.value.completed)),p(()=>A(I,"editing",d.value===m.value.id)),T(Z,b),I},qe=Z=>{let m=$(nt),b=o(m,[0]);return k(b,"click",xe),T(Z,m),b};return p(()=>fe.checked=E.value===0),k(fe,"change",j),Ee(Oe,Me,()=>g.value),Q(Le,()=>E.value),Q(Ie,()=>E.value===1?"item":"items"),p(()=>A(He,"selected",h.value==="all")),p(()=>A(Pe,"selected",h.value==="active")),p(()=>A(Be,"selected",h.value==="completed")),V(De,()=>a.value.length>E.value?qe:null),T(r,c),Ke};k(Re,"keydown",Se),V(Te,()=>a.value.length>0?je:null),F(l,W)}var ce=re("x-app",it,{},[]);ce.prototype.attachShadow=function(){return this};var rt=new ce;document.body.append(rt);
//# sourceMappingURL=app.js.map
